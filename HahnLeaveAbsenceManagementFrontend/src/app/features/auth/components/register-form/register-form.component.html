<form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">
  <!-- 2-column layout -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- First Name -->
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="firstName">First Name</label>
      <input
        id="firstName"
        type="text"
        formControlName="firstName"
        autocomplete="given-name"
        class="w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"
        placeholder="John"
        [attr.aria-invalid]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
      />
      <div *ngIf="registerForm.get('firstName')?.touched && registerForm.get('firstName')?.invalid" class="mt-1 text-sm text-red-600">
        <span *ngIf="registerForm.get('firstName')?.errors?.['required']">First name is required.</span>
        <span *ngIf="registerForm.get('firstName')?.errors?.['maxlength']">Max 50 characters.</span>
      </div>
    </div>

    <!-- Last Name -->
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="lastName">Last Name</label>
      <input
        id="lastName"
        type="text"
        formControlName="lastName"
        autocomplete="family-name"
        class="w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"
        placeholder="Doe"
        [attr.aria-invalid]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
      />
      <div *ngIf="registerForm.get('lastName')?.touched && registerForm.get('lastName')?.invalid" class="mt-1 text-sm text-red-600">
        <span *ngIf="registerForm.get('lastName')?.errors?.['required']">Last name is required.</span>
        <span *ngIf="registerForm.get('lastName')?.errors?.['maxlength']">Max 50 characters.</span>
      </div>
    </div>

    <!-- Email (centered, full row) -->
    <div class="md:col-span-2 flex justify-center">
      <div class="w-full">
        <label class="block text-sm font-medium text-slate-700 mb-1" for="email">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          autocomplete="email"
          class="w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"
          placeholder="you@example.com"
          [attr.aria-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
        />
        <div *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid" class="mt-1 text-sm text-red-600">
          <span *ngIf="registerForm.get('email')?.errors?.['required']">Email is required.</span>
          <span *ngIf="registerForm.get('email')?.errors?.['email']">Enter a valid email address.</span>
        </div>
      </div>
    </div>

    <!-- Password -->
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="password">Password</label>
      <input
        id="password"
        type="password"
        formControlName="password"
        autocomplete="new-password"
        class="w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"
        placeholder="••••••••"
        [attr.aria-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
      />
      <div *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid" class="mt-1 text-sm text-red-600">
        <span *ngIf="registerForm.get('password')?.errors?.['required']">Password is required.</span>
        <span *ngIf="registerForm.get('password')?.errors?.['minlength']">At least 8 characters.</span>
      </div>
    </div>

    <!-- Role -->
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="role">Role</label>
      <select
        id="role"
        formControlName="role"
        class="w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"
        [attr.aria-invalid]="registerForm.get('role')?.invalid && registerForm.get('role')?.touched"
      >
        <option [ngValue]="null" disabled>Select role</option>
        <option *ngFor="let r of roles" [ngValue]="r.value">{{ r.label }}</option>
      </select>
      <div *ngIf="registerForm.get('role')?.touched && registerForm.get('role')?.invalid" class="mt-1 text-sm text-red-600">
        <span *ngIf="registerForm.get('role')?.errors?.['required']">Role is required.</span>
      </div>
    </div>

  </div>

  <!-- Error Message (top-level) -->
  <div *ngIf="errorMessage" class="text-sm text-red-600">
    {{ errorMessage }}
  </div>

  <!-- Submit -->
  <button
    type="submit"
    [disabled]="isSubmitting || registerForm.invalid"
    class="w-full rounded-lg bg-emerald-600 text-white py-2 font-medium hover:bg-emerald-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
    [attr.aria-busy]="isSubmitting"
  >
    <span *ngIf="!isSubmitting">Register</span>
    <span *ngIf="isSubmitting">Registering…</span>
  </button>
</form>
